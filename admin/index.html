<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <title>Admin - VIDARELAX</title>
  <link rel="icon" type="image/png" href="../imagenes/logo.png" />

  <!-- CONFIGURACIÓN NETLIFY IDENTITY CORREGIDA -->
  <script>
    if (window.location.hostname === 'vidarelax.com.co') {
      window.netlifyIdentityConfig = {
        url: 'https://radiant-kashata-fa9673.netlify.app/.netlify/identity'
      };
    }
  </script>
  
  <!-- Netlify Identity Widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <!-- Estilos INMEDIATOS y AGRESIVOS -->
  <style>
/* APLICAR INMEDIATAMENTE AL BODY */
html, body {
  margin: 0 !important;
  padding: 0 !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif !important;
  background: linear-gradient(135deg, #4A7C7E 0%, #6B9FA1 100%) !important;
  min-height: 100vh !important;
}

/* Variables globales */
:root {
  --primary-color: #4A7C7E !important;
  --secondary-color: #C4A962 !important;
  --accent-color: #6B9FA1 !important;
  --text-color: #2c3e50 !important;
  --bg-color: #ffffff !important;
  --sidebar-bg: rgba(248, 249, 250, 0.95) !important;
}

/* ESTILOS INMEDIATOS - Aplicar a TODO */
* {
  box-sizing: border-box !important;
}

/* Contenedor principal - CUALQUIER CONTENEDOR */
#nc-root,
div[data-testid="nc-app"],
div[class*="App"],
div[role="application"],
body > div,
.cms-wrapper {
  background: linear-gradient(135deg, #4A7C7E 0%, #6B9FA1 100%) !important;
  min-height: 100vh !important;
}

/* Header - CUALQUIER HEADER */
div[class*="AppHeader"],
header[class*="AppHeader"],
div[class*="TopBar"],
nav[role="banner"],
header,
.header {
  background: linear-gradient(135deg, #4A7C7E 0%, #6B9FA1 100%) !important;
  color: white !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
  border-bottom: none !important;
}

/* TODO EL TEXTO DEL HEADER */
div[class*="AppHeader"] *,
header[class*="AppHeader"] *,
nav[role="banner"] *,
header *,
.header * {
  color: white !important;
}

/* Sidebar - CUALQUIER SIDEBAR */
nav[class*="Sidebar"],
div[class*="Sidebar"],
aside[class*="Sidebar"],
nav[role="navigation"],
.sidebar,
aside {
  background: rgba(248, 249, 250, 0.95) !important;
  backdrop-filter: blur(10px) !important;
  border-right: 1px solid rgba(74, 124, 126, 0.2) !important;
  box-shadow: 2px 0 10px rgba(0,0,0,0.1) !important;
}

/* Títulos del sidebar */
div[class*="SidebarTitle"],
h1[class*="SidebarTitle"],
h2[class*="SidebarTitle"],
h1, h2, h3 {
  color: #4A7C7E !important;
  font-weight: 600 !important;
}

/* Enlaces del sidebar - MUY ESPECÍFICO */
nav[class*="Sidebar"] a,
nav[class*="Sidebar"] button,
nav[class*="Sidebar"] span,
div[class*="Sidebar"] a,
aside[class*="Sidebar"] a,
.sidebar a,
aside a,
nav a {
  color: #4A7C7E !important;
  transition: all 0.3s ease !important;
}

/* Enlaces activos - MUY ESPECÍFICO */
nav[class*="Sidebar"] a[aria-current="page"],
nav[class*="Sidebar"] a.active,
div[class*="SidebarItem-active"],
li[class*="active"],
a[aria-current="page"],
.active {
  background: #4A7C7E !important;
  color: white !important;
  border-radius: 8px !important;
  margin: 2px 8px !important;
}

/* Hover en sidebar */
nav[class*="Sidebar"] a:hover,
nav[class*="Sidebar"] button:hover,
div[class*="Sidebar"] a:hover,
.sidebar a:hover,
nav a:hover {
  background: rgba(74, 124, 126, 0.1) !important;
  border-radius: 6px !important;
  transform: translateX(4px) !important;
}

/* Área principal - CUALQUIER MAIN */
main,
div[class*="MainContent"],
div[class*="Content"],
section[role="main"],
.main-content {
  background: white !important;
  border-radius: 12px 0 0 0 !important;
  box-shadow: -2px 0 10px rgba(0,0,0,0.1) !important;
  margin-left: 0 !important;
}

/* Botones - TODOS LOS BOTONES */
button,
input[type="submit"],
a[class*="Button"],
button[class*="Button"],
button[type="button"],
.button {
  background: #4A7C7E !important;
  border-color: #4A7C7E !important;
  color: white !important;
  border-radius: 8px !important;
  transition: all 0.3s ease !important;
  font-weight: 500 !important;
  padding: 8px 16px !important;
  border: 1px solid #4A7C7E !important;
}

/* Hover en botones */
button:hover,
input[type="submit"]:hover,
a[class*="Button"]:hover,
button[class*="Button"]:hover,
.button:hover {
  background: #6B9FA1 !important;
  border-color: #6B9FA1 !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 12px rgba(74, 124, 126, 0.3) !important;
}

/* Cards */
div[class*="CollectionCard"],
div[class*="Card"],
div[class*="FileCard"],
article,
.card {
  background: white !important;
  border-radius: 12px !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
  transition: all 0.3s ease !important;
  border: 1px solid rgba(74, 124, 126, 0.1) !important;
}

/* Inputs */
input,
textarea,
select {
  border: 1px solid #e0e0e0 !important;
  border-radius: 8px !important;
  padding: 0.75rem !important;
  transition: all 0.3s ease !important;
  background: white !important;
}

input:focus,
textarea:focus,
select:focus {
  border-color: #4A7C7E !important;
  box-shadow: 0 0 0 3px rgba(74, 124, 126, 0.1) !important;
  outline: none !important;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: #4A7C7E;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: #6B9FA1;
}

/* FORZAR estilos desde el primer momento */
.vidarelax-loaded,
.vidarelax-loaded * {
  transition: all 0.3s ease !important;
}
</style>

  <!-- Script INMEDIATO para aplicar estilos -->
  <script>
    // APLICAR ESTILOS INMEDIATAMENTE
    document.addEventListener('DOMContentLoaded', function() {
      document.body.classList.add('vidarelax-loaded');
      document.body.style.background = 'linear-gradient(135deg, #4A7C7E 0%, #6B9FA1 100%)';
    });
  </script>
</head>
<body class="vidarelax-loaded">
  <!-- Decap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.1.2/dist/decap-cms.js"></script>

  <!-- Scripts principales -->
  <script>
// Configurar Netlify Identity
if (window.netlifyIdentity) {
  if (window.location.hostname === 'vidarelax.com.co') {
    window.netlifyIdentity.init({
      APIUrl: 'https://radiant-kashata-fa9673.netlify.app/.netlify/identity'
    });
  }
}

// APLICAR ESTILOS INMEDIATAMENTE Y CONSTANTEMENTE
function applyVidarelaxStyles() {
  // Aplicar al body y html
  document.documentElement.style.background = 'linear-gradient(135deg, #4A7C7E 0%, #6B9FA1 100%)';
  document.body.style.background = 'linear-gradient(135deg, #4A7C7E 0%, #6B9FA1 100%)';
  document.body.classList.add('vidarelax-loaded');
  
  // Aplicar a contenedores principales
  const containers = document.querySelectorAll('#nc-root, [data-testid="nc-app"], [class*="App"], body > div');
  containers.forEach(el => {
    el.style.background = 'linear-gradient(135deg, #4A7C7E 0%, #6B9FA1 100%)';
    el.style.minHeight = '100vh';
  });
  
  // Sidebar
  const sidebars = document.querySelectorAll('[class*="Sidebar"], nav[role="navigation"], aside');
  sidebars.forEach(el => {
    el.style.background = 'rgba(248, 249, 250, 0.95)';
    el.style.backdropFilter = 'blur(10px)';
    el.style.borderRight = '1px solid rgba(74, 124, 126, 0.2)';
  });
  
  // Main content
  const mains = document.querySelectorAll('[class*="MainContent"], main, [role="main"]');
  mains.forEach(el => {
    el.style.background = 'white';
    el.style.borderRadius = '12px 0 0 0';
  });
  
  // Headers
  const headers = document.querySelectorAll('[class*="AppHeader"], header, [role="banner"]');
  headers.forEach(el => {
    el.style.background = 'linear-gradient(135deg, #4A7C7E 0%, #6B9FA1 100%)';
    el.style.color = 'white';
  });
}

// Aplicar estilos cada vez que algo cambie
const observer = new MutationObserver(applyVidarelaxStyles);

// Configurar autenticación
function setupAuth() {
  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", user => {
      if (!user) {
        window.netlifyIdentity.on("login", () => {
          document.location.href = "/admin/";
        });
      }
    });
    
    window.netlifyIdentity.on("logout", () => {
      alert("Sesión cerrada. Regresando a la página principal de VIDARELAX...");
      setTimeout(() => {
        window.location.href = "https://www.vidarelax.com.co/";
      }, 1000);
    });
  }
}

// INICIALIZAR TODO INMEDIATAMENTE
applyVidarelaxStyles();
setupAuth();

// Aplicar estilos constantemente
setInterval(applyVidarelaxStyles, 1000);

// Observar cambios
if (document.body) {
  observer.observe(document.body, { childList: true, subtree: true });
}

// Aplicar cuando cargue
window.addEventListener('load', applyVidarelaxStyles);
document.addEventListener('DOMContentLoaded', applyVidarelaxStyles);

// Aplicar al hacer focus en la ventana
window.addEventListener('focus', applyVidarelaxStyles);
</script>
</body>
</html>
